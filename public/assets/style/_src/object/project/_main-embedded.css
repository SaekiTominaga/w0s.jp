/*
埋め込みコンテンツ

Styleguide 2.5.
*/

/*
埋め込みコンテンツ（画像、動画、 <iframe> など）

Markup:
<div class="p-embed {{modifier_class}}">
<img src="https://media.w0s.jp/thumbimage/sample.jpg?type=webp;w=360;quality=30" alt=""/>
</div>
<div class="p-embed {{modifier_class}}">
<a href="https://example.com/sample.jpg"><img src="https://media.w0s.jp/thumbimage/sample.jpg?type=webp;w=360;quality=30" alt=""/></a>
</div>
<div class="p-embed {{modifier_class}}">
<video poster="https://media.w0s.jp/thumbimage/sample.jpg?type=webp;w=360;quality=30"></video>
</div>
<div class="p-embed {{modifier_class}}">
<iframe src="https://example.com/"></iframe>
</div>

.-border - 埋め込みコンテンツに枠線を表示

Styleguide 2.5.1
*/
.p-embed {
	--_border-width: 0px;

	position: relative; /* for Safari */
	contain: layout;

	&.-border {
		--_border-width: 1px;
	}

	& > :any-link {
		--_expand-icon-padding: 4px;

		display: inline-block;
		outline-width: var(--outline-width-bold);
		outline-offset: -1px;

		&::before {
			display: block;
			position: absolute;
			box-sizing: border-box;
			inset: 1px;
			background: rgb(0 0 0 / 70%) url("/assets/image/media-expansion.svg") center/contain no-repeat content-box border-box;
			padding: var(--_expand-icon-padding);
			inline-size: 24px;
			block-size: 24px;
			content: "";
		}

		&:hover {
			--_expand-icon-padding: 3px;
		}
	}

	& img,
	& video {
		display: inline-block;
		vertical-align: top;
		border: var(--_border-width) solid var(--color-black);
		max-inline-size: calc(100% - var(--_border-width) * 2);
		block-size: auto;
	} /* <audio> については block-size: auto を指定すると Chrome で非表示になる現象があるので、ブラウザのデフォルトスタイルに任せる */

	& video {
		outline-width: var(--outline-width-bold);
		outline-offset: -1px;
	}

	& audio {
		outline-width: var(--outline-width-bold);
		outline-offset: 0;
	}

	& iframe {
		--_margin-inline: 0px; /* 左右の空き（空きがないとタップによるスクロールに支障が起こるため） */

		display: block;
		box-sizing: border-box;
		margin-inline: auto;
		border: var(--_border-width) solid var(--color-black);
		aspect-ratio: var(--aspect-ratio, auto);
		inline-size: calc(100% - var(--_margin-inline) * 2);
		block-size: auto;

		@media (--breakpoint) {
			--_margin-inline: 15px;
		}
	}
}

/*
埋め込みコンテンツのリンク

Markup:
<div class="p-embed-link">
<a href="https://example.com/">
<img src="https://media.w0s.jp/thumbimage/sample.jpg?type=webp;w=360;quality=30" alt=""/>
<span class="p-embed-link__title"></span>
</a>
</div>

Styleguide 2.5.2
*/
.p-embed-link {
	font-size: calc(100% / var(--font-ratio-1));
	line-height: var(--line-height-narrow);

	& > :any-link {
		outline: none;

		& > img {
			outline-offset: -1px;
			border: 1px solid var(--color-black);
		}

		&:focus {
			& > img {
				outline: var(--outline-width-bold) solid var(--outline-color);
			}

			& .p-embed-link__title {
				outline: var(--outline-width) solid var(--outline-color);
			}
		}
	}
}

.p-embed-link__title {
	outline-offset: var(--outline-offset);

	&::before {
		display: block;
		content: "";
	}
}

/*
テキスト & 埋め込みコンテンツ横並び

Markup:
<div class="p-embed-sidebar {{modifier_class}}">
<div class="p-embed-sidebar__text">
<p>テキスト</p>
</div>
<div class="p-embed-sidebar__embed">
<img src="https://media.w0s.jp/thumbimage/sample.jpg?type=webp;w=360;quality=30" alt=""/>
</div>
</div>

.-text-first - テキストエリアが先頭
.-embed-first - 埋め込みエリアが先頭

Styleguide 2.5.3
*/
.p-embed-sidebar {
	display: flex;
	flex-wrap: wrap;
	gap: 15px 30px;

	/* テキストエリアが先頭 */
	&.-text-first {
		& .p-embed-sidebar__embed {
			--_order: 1;
		}
	}

	/* 埋め込みエリアが先頭 */
	&.-embed-first {
		& .p-embed-sidebar__text {
			--_order: 1;
		}
	}
}

.p-embed-sidebar__text {
	flex: 999 0px;
	order: var(--_order, 0);
	min-inline-size: 50%;
}

.p-embed-sidebar__embed {
	order: var(--_order, 0);
}
