/*
セクション

Styleguide 2.1.
*/

/*
セクション

Markup:
<section class="p-section {{modifier_class}}">
<div class="p-section__hdg">
	<h2>見出し <span class="p-section__subhdg">（注釈）</span></h2>
	<p class="p-section__hdg-note">補足</p>
</div>
</section>

.-hdg-a - 子に見出しA を含む
.-hdg-b - 子に見出しB を含む
.-hdg-c - 子に見出しC を含む

Styleguide 2.1.1
*/
@keyframes section-target {
	0% {
		background-color: var(--color-verylightred);
	}

	50% {
		background-color: var(--color-verylightred);
	}

	100% {
		background-color: transparent;
	}
}

.p-section {
	--_margin-block: 1rem;

	&:not(:first-child) {
		@nest :not(.p-section__hdg) + & {
			margin-block-start: var(--_margin-block);
		}
	}

	&:not(:last-child) {
		margin-block-end: var(--_margin-block);
	}

	&.-hdg-a {
		--_margin-block: 4.5rem;
	}

	&.-hdg-b {
		--_margin-block: 3.75rem;
	}

	&.-hdg-c {
		--_margin-block: 3rem;
	}

	&:target {
		animation: section-target 1s;
	}
}

.p-section__hdg {
	line-height: var(--line-height-narrow);

	@nest .p-section.-hdg-a > & {
		--_stick-width: 0.25em;
		--_stick-height: calc(100% - 0.85em);
		--_border-inline-color: var(--color-gray);

		position: relative; /* for Safari */
		contain: content;
		border-block-start: 1px solid transparent;
		border-block-end: 1px solid var(--color-border-dark);
		padding-inline-start: calc(var(--_stick-width) + 0.5em);
		padding-block: 0.25em;
		font-size: calc(100% * var(--font-ratio-6));

		&::before {
			display: block;
			position: absolute;
			inset-block-start: calc((100% - var(--_stick-height)) / 2);
			inset-inline-start: 0;
			border-radius: var(--border-radius-full);
			background: var(--_border-inline-color);
			width: var(--_stick-width);
			height: var(--_stick-height);
			content: "";
		}

		& + * {
			margin-block-start: 2rem;
		}
	}

	@nest .p-section.-hdg-b > & {
		--_stick-width: 0.25em;
		--_stick-height: calc(100% - 0.35em);
		--_border-inline-color: var(--color-lightgray);

		position: relative; /* for Safari */
		contain: content;
		padding-inline-start: calc(var(--_stick-width) + 0.5em);
		font-size: calc(100% * var(--font-ratio-4));

		&::before {
			display: inline-block;
			position: absolute;
			inset-block-start: calc((100% - var(--_stick-height)) / 2);
			inset-inline-start: 0;
			border-radius: var(--border-radius-full);
			background: var(--_border-inline-color);
			width: var(--_stick-width);
			height: var(--_stick-height);
			content: "";
		}
	}

	@nest .p-section.-hdg-c > & {
		font-size: calc(100% * var(--font-ratio-2));
	}

	& > :is(h2, h3, h4) {
		display: inline;
		vertical-align: middle;
	}

	/* セルフリンク */
	& > :any-link {
		vertical-align: middle;
		margin-inline-start: 0.25em;
		outline-width: var(--outline-width-bold);
		color: var(--link-color);
		font-size: calc(100% / var(--font-ratio-3));
		text-decoration: none;
	}
}

/* 補足 */
.p-section__hdg-note {
	margin-block-start: 0.5em;
	color: var(--color-gray);
	font-size: calc(1rem / var(--font-ratio-1));
}
