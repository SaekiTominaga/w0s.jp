<!DOCTYPE html>
<html lang="ja">
	<head>
		<title>ウェブ巡回（ニュース）</title>

		<meta name="viewport" content="width=device-width,initial-scale=1" />

		<link rel="stylesheet" href="/assets/style/admin.css" />
		<link rel="stylesheet" href="/assets/style/layout_full.css" title="通常表示" />
		<link rel="alternate stylesheet" href="/assets/style/layout_reader.css" title="リーダー表示" id="stylesheet-print" />

		<script src="/assets/script/w0s.mjs" type="module"></script>
	</head>
	<body>
		<div class="l-page">
			<%- include('./_include/_header') %>

			<div id="content" class="l-content -nosidebar">
				<div class="l-content__header">
					<div class="p-title">
						<h1>ウェブ巡回（ニュース）</h1>
					</div>
				</div>
				<main class="l-content__main">
					<p class="p-text"><a href="/admin/crawler-news" class="c-button -link">元に戻る</a></p>

					<section class="p-section -hdg-a">
						<div class="p-section__hdg">
							<h2>新着データ</h2>
						</div>

						<div class="p-text">
							<p><a href="<%= page.query.url %>" referrerpolicy="no-referrer" class="c-link"><%= page.query.url %></a></p>
						</div>

						<table class="p-table p-admin-crawler-table">
							<thead>
								<tr>
									<th></th>
									<th>日付</th>
									<th>メッセージ</th>
								</tr>
							</thead>
							<tbody>
								<% for (const newsData of newsDataList) { %>
								<tr>
									<td>
										<form action="<%= page.path %>" method="post">
											<p><input type="hidden" name="url" value="<%= page.query.url %>" /></p>
											<p><input type="hidden" name="id" value="<%= newsData.id %>" /></p>
											<p><button name="actiondel" value="1" is="w0s-confirm-button" data-message="削除しますか?">削除</button></p>
										</form>
									</td>
									<% if (newsData.date !== null) { %>
									<td><%= newsData.date.format('YYYY年M月D日') %></td>
									<% } else { %>
									<td></td>
									<% } %> <% if (newsData.refer_url !== null) { %>
									<td><a href="<%= newsData.refer_url %>" referrerpolicy="no-referrer"><%= newsData.content %></a></td>
									<% } else { %>
									<td><%= newsData.content %></td>
									<% } %>
								</tr>
								<% } %>
							</tbody>
						</table>
					</section>
				</main>
			</div>

			<%- include('./_include/_footer') %>
		</div>
	</body>
</html>
