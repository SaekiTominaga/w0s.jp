<!DOCTYPE html>
<html lang="ja">
	<head>
		<title>東急電車　車歴表</title>

		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<meta name="w0s:blog:newly" content="railway" />
		<meta name="w0s:amazon" content="railway" />

		<link rel="stylesheet" href="/assets/style/tokyu.css" />
		<link rel="stylesheet" href="/assets/style/layout_full.css" title="通常表示" />
		<link rel="alternate stylesheet" href="/assets/style/layout_reader.css" title="リーダー表示" />
		<link rel="stylesheet" href="/assets/style/layout_reader.css" media="print" />
		<link rel="search" href="/tokyu/data/history/search" type="application/opensearchdescription+xml" title="東急電車 車歴検索" />

		<script src="/assets/script/trusted-types.js"></script>
		<script src="/assets/script/w0s.mjs" type="module"></script>
		<script src="/assets/script/tokyu_car_history.mjs" type="module"></script>
		<script src="https://analytics.w0s.jp/matomo/matomo.js" async=""></script>
		<script src="/assets/script/analytics.js" defer=""></script>
	</head>
	<body itemscope="" itemtype="http://schema.org/WebPage">
		<div class="l-page">
			<%- include('./_include/_header_tokyu') -%>

			<div id="content" class="l-content">
				<div class="l-content__header">
					<div class="p-topic-path">
						<p itemprop="breadcrumb"><a href="/tokyu/">ホーム</a><span class="p-topic-path__separator">&gt;</span><a href="/tokyu/data/">東急電車の車両データ</a><span class="p-topic-path__separator">&gt;</span><a aria-current="page">現在のページ</a></p>
					</div>

					<div class="p-title">
						<h1 itemprop="name">東急電車　車歴表</h1>
						<p class="p-title__update"><time datetime="2010-03-01" itemprop="dateModified">2010年3月</time>更新</p>
					</div>
				</div>
				<main class="l-content__main">
					<%_ if (page.query.output === null) { _%>
					<div class="p-box">
						<ul class="p-list">
							<li>旧7000系〜新3000系、300系までの車両が登録されています。新5000系以降は検索できません。</li>
							<li>全車両を見る場合は「車号」を未入力かつ「車種」を未選択の状態で検索してください。</li>
							<li>
								「車号」では次に挙げる記号を使うことで特殊な検索ができます。
								<ul>
									<li>「.」（ピリオド）は任意の1文字に相当します。</li>
									<li>「*」（アスタリスク）は任意数（0文字含む）の連続した文字列に相当します。</li>
									<li>たとえば、デハ8700形の全車両を表示するには、車種の「8500系」にチェックを入れたうえで、車号に『<kbd>.7..</kbd>』または『<kbd>.7*</kbd>』と入力します。</li>
								</ul>
							</li>
							<li>改造によって車種に変更が生じた車両では、改造前後の紐付けができません。たとえば、車号に『<kbd>7001</kbd>』と入力し、「旧車号を含む」にチェックを入れて検索しても、7700系化後の車号はヒットしません。</li>
							<li>入籍日、改番日の参考資料については、<a href="/tokyu/data/history/ref">出典一覧</a>を参照ください。</li>
						</ul>
					</div>
					<%_ } else { _%>
					<details class="p-toggle" is="w0s-animation-details" data-summary-toggle="折りたたむ">
						<summary>説明文を表示</summary>
						<div class="p-toggle__contents">
							<div class="p-box">
								<ul class="p-list">
									<li>旧7000系〜新3000系、300系までの車両が登録されています。新5000系以降は検索できません。</li>
									<li>全車両を見る場合は「車号」を未入力かつ「車種」を未選択の状態で検索してください。</li>
									<li>
										「車号」では次に挙げる記号を使うことで特殊な検索ができます。
										<ul>
											<li>「.」（ピリオド）は任意の1文字に相当します。</li>
											<li>「*」（アスタリスク）は任意数（0文字含む）の連続した文字列に相当します。</li>
											<li>たとえば、デハ8700形の全車両を表示するには、車種の「8500系」にチェックを入れたうえで、車号に『<kbd>.7..</kbd>』または『<kbd>.7*</kbd>』と入力します。</li>
										</ul>
									</li>
									<li>改造によって車種に変更が生じた車両では、改造前後の紐付けができません。たとえば、車号に『<kbd>7001</kbd>』と入力し、「旧車号を含む」にチェックを入れて検索しても、7700系化後の車号はヒットしません。</li>
									<li>入籍日、改番日の参考資料については、<a href="/tokyu/data/history/ref">出典一覧</a>を参照ください。</li>
								</ul>
							</div>
						</div>
					</details>
					<%_ } _%>

					<section class="p-section -hdg-a">
						<div class="p-section__hdg">
							<h2>検索条件入力</h2>
						</div>

						<form class="c-stack">
							<%_ if (validateErrors.length > 0) { _%>
							<div class="p-form-errors js-autofocus">
								<p><strong><%= validateErrors.length %>個のエラーがあります。</strong></p>
								<ul class="p-list">
									<%_ for (const validateError of validateErrors) { _%>
									<li><%= validateError.msg %></li>
									<%_ } _%>
								</ul>
							</div>
							<%_ } _%>

							<div class="p-form-grid -complex">
								<div class="p-form-grid__group">
									<fieldset>
										<legend class="p-form-grid__legend"><label for="fc-num" class="c-label">車号</label></legend>
										<div class="p-form-grid__contents">
											<div class="c-form-controls">
												<%_ if (page.query.number === null || page.query.number === '') { _%>
												<input class="c-input js-convert-tokyu-car-histroy-num js-validation" id="fc-num" name="num" maxlength="4" pattern="[0-37-9０-３７-９yYｙＹ\.．\*＊][0-9０-９\.．\*＊]{0,2}[0-9０-９aAａＡbBｂＢ\.．\*＊]?" style="--inline-size: 4em" aria-errormessage="input-validate-num" data-validation-message-pattern="該当する車両は存在しません。" />
												<%_ } else { _%>
												<input class="c-input js-convert-tokyu-car-histroy-num js-validation" id="fc-num" name="num" value="<%= page.query.number %>" maxlength="4" pattern="[0-37-9０-３７-９yYｙＹ\.．\*＊][0-9０-９\.．\*＊]{0,2}[0-9０-９aAａＡbBｂＢ\.．\*＊]?" style="--inline-size: 4em" aria-errormessage="input-validate-num" data-validation-message-pattern="旧7000系〜新3000系、300系で該当する車両は存在しません。" />
												<%_ } _%>
												<label class="c-label -check">
													<%_ if (page.query.number_old) { _%>
													<input type="checkbox" name="old" value="1" checked="" />
													<%_ } else { _%>
													<input type="checkbox" name="old" value="1" />
													<%_ } _%>
													<span class="c-label__text">旧車号を含む</span></label
												>
											</div>
											<p hidden="" class="c-fc-invalid" id="input-validate-num"></p>
										</div>
									</fieldset>
								</div>
								<div class="p-form-grid__group">
									<fieldset>
										<legend class="p-form-grid__legend">車種</legend>
										<div class="p-form-grid__contents">
											<div class="c-form-controls -checkbox">
												<%_ for (const car of carSeries) { _%>
												<label class="c-label -check">
													<%_ if (page.query.series !== null && page.query.series.includes(car.id)) { _%>
													<input type="checkbox" name="ser[]" value="<%= car.id %>" checked="" />
													<%_ } else { _%>
													<input type="checkbox" name="ser[]" value="<%= car.id %>" />
													<%_ } _%>

													<span class="c-label__text"><%= car.series %></span>
												</label>
												<%_ } _%>
												<p>
													<button type="button" is="w0s-checkbox-allcheck" data-course="check" data-targets-name="ser[]" class="c-button">全車種を選択</button>
													<button type="button" is="w0s-checkbox-allcheck" data-course="uncheck" data-targets-name="ser[]" class="c-button">全ての選択を解除</button>
												</p>
											</div>
										</div>
									</fieldset>
								</div>
								<div class="p-form-grid__group">
									<fieldset>
										<legend class="p-form-grid__legend">入籍日</legend>
										<div class="p-form-grid__contents">
											<div class="c-form-controls">
												<label class="c-label -input"
													><span class="c-label__text">開始日</span>
													<%_ if (page.query.register_start === null || page.query.register_start === '') { _%>
													<input is="w0s-input-date-to-text" type="date" class="c-input js-validation" name="res" min="1962-01-25" max="2001-03-24" style="--inline-size: 8em" aria-errormessage="input-validate-registarstart" data-validation-message-pattern="「開始日」は YYYY-MM-DD 形式で入力してください。" data-validation-message-date-noexist="「開始日」が存在しない日付です。" data-validation-message-date-min="「開始日」は 1962年1月25日 以降を入力してください。旧7000系〜新3000系、300系でそれ以前に入籍した車両は存在しません。" data-validation-message-date-max="「開始日」は 2001年3月24日 以前を入力してください。旧7000系〜新3000系、300系でそれ以降に入籍した車両は存在しません。" />
													<%_ } else { _%>
													<input is="w0s-input-date-to-text" type="date" class="c-input js-validation" name="res" value="<%= page.query.register_start %>" min="1962-01-25" max="2001-03-24" style="--inline-size: 8em" aria-errormessage="input-validate-registarstart" data-validation-message-pattern="「開始日」は YYYY-MM-DD 形式で入力してください。" data-validation-message-date-noexist="「開始日」が存在しない日付です。" data-validation-message-date-min="「開始日」は 1962年1月25日 以降を入力してください。旧7000系〜新3000系、300系でそれ以前に入籍した車両は存在しません。" data-validation-message-date-max="「開始日」は 2001年3月24日 以前を入力してください。旧7000系〜新3000系、300系でそれ以降に入籍した車両は存在しません。" />
													<%_ } _%>
												</label>
												<label class="c-label -input"
													><span class="c-label__text">終了日</span>
													<%_ if (page.query.register_end === null || page.query.register_end === '') { _%>
													<input is="w0s-input-date-to-text" type="date" class="c-input js-validation" name="ree" min="1962-01-25" max="2001-03-24" style="--inline-size: 8em" aria-errormessage="input-validate-registarend" data-validation-message-pattern="「終了日」は YYYY-MM-DD 形式で入力してください。" data-validation-message-date-noexist="「終了日」が存在しない日付です。" data-validation-message-date-min="「終了日」は 1962年1月25日 以降を入力してください。旧7000系〜新3000系、300系でそれ以前に入籍した車両は存在しません。" data-validation-message-date-max="「終了日」は 2001年3月24日 以前を入力してください。旧7000系〜新3000系、300系でそれ以降に入籍した車両は存在しません。" />
													<%_ } else { _%>
													<input is="w0s-input-date-to-text" type="date" class="c-input js-validation" name="ree" value="<%= page.query.register_end %>" min="1962-01-25" max="2001-03-24" style="--inline-size: 8em" aria-errormessage="input-validate-registarend" data-validation-message-pattern="「終了日」は YYYY-MM-DD 形式で入力してください。" data-validation-message-date-noexist="「終了日」が存在しない日付です。" data-validation-message-date-min="「終了日」は 1962年1月25日 以降を入力してください。旧7000系〜新3000系、300系でそれ以前に入籍した車両は存在しません。" data-validation-message-date-max="「終了日」は 2001年3月24日 以前を入力してください。旧7000系〜新3000系、300系でそれ以降に入籍した車両は存在しません。" />
													<%_ } _%>
												</label>
											</div>
											<p hidden="" class="c-fc-invalid" id="input-validate-registarstart"></p>
											<p hidden="" class="c-fc-invalid" id="input-validate-registarend"></p>
										</div>
									</fieldset>
								</div>
								<div class="p-form-grid__group">
									<fieldset>
										<legend class="p-form-grid__legend" id="label-sort">ソート</legend>
										<div class="p-form-grid__contents">
											<div class="c-form-controls -checkbox" role="radiogroup" aria-labelledby="label-sort">
												<label class="c-label -check">
													<%_ if (page.query.sort === null || page.query.sort === 'snu') { _%>
													<input type="radio" name="srt" value="snu" checked="" />
													<%_ } else { _%>
													<input type="radio" name="srt" value="snu" />
													<%_ } _%>
													<span class="c-label__text">車号（車種別）</span></label
												>
												<label class="c-label -check">
													<%_ if (page.query.sort === 'num') { _%>
													<input type="radio" name="srt" value="num" checked="" />
													<%_ } else { _%>
													<input type="radio" name="srt" value="num" />
													<%_ } _%>
													<span class="c-label__text">車号（車種混合）</span></label
												>
												<label class="c-label -check">
													<%_ if (page.query.sort === 'typ') { _%>
													<input type="radio" name="srt" value="typ" checked="" />
													<%_ } else { _%>
													<input type="radio" name="srt" value="typ" />
													<%_ } _%>
													<span class="c-label__text">形式</span></label
												>
												<label class="c-label -check">
													<%_ if (page.query.sort === 'ann') { _%>
													<input type="radio" name="srt" value="ann" checked="" />
													<%_ } else { _%>
													<input type="radio" name="srt" value="ann" />
													<%_ } _%>
													<span class="c-label__text">呼称</span></label
												>
												<label class="c-label -check">
													<%_ if (page.query.sort === 'reg') { _%>
													<input type="radio" name="srt" value="reg" checked="" />
													<%_ } else { _%>
													<input type="radio" name="srt" value="reg" />
													<%_ } _%>
													<span class="c-label__text">入籍日</span></label
												>
											</div>
										</div>
									</fieldset>
								</div>
								<div class="p-form-grid__group">
									<fieldset>
										<legend class="p-form-grid__legend" id="label-era">年表記</legend>
										<div class="p-form-grid__contents">
											<div class="c-form-controls -checkbox" role="radiogroup" aria-labelledby="label-era">
												<label class="c-label -check">
													<%_ if (page.query.era === null || page.query.era === 'ad') { _%>
													<input type="radio" name="era" value="ad" checked="" />
													<%_ } else { _%>
													<input type="radio" name="era" value="ad" />
													<%_ } _%>
													<span class="c-label__text">西暦</span></label
												>
												<label class="c-label -check">
													<%_ if (page.query.era === 'ja') { _%>
													<input type="radio" name="era" value="ja" checked="" />
													<%_ } else { _%>
													<input type="radio" name="era" value="ja" />
													<%_ } _%>
													<span class="c-label__text">和暦</span></label
												>
											</div>
										</div>
									</fieldset>
								</div>
								<div class="p-form-grid__group">
									<fieldset>
										<legend class="p-form-grid__legend" id="label-output">出力</legend>
										<div class="p-form-grid__contents">
											<div class="c-form-controls -checkbox" role="radiogroup" aria-labelledby="label-output">
												<label class="c-label -check">
													<%_ if (page.query.output === null || page.query.output === 'nor') { _%>
													<input type="radio" name="out" value="nor" checked="" />
													<%_ } else { _%>
													<input type="radio" name="out" value="nor" />
													<%_ } _%>
													<span class="c-label__text">全列表示</span></label
												>
												<label class="c-label -check">
													<%_ if (page.query.output === 'mob') { _%>
													<input type="radio" name="out" value="mob" checked="" />
													<%_ } else { _%>
													<input type="radio" name="out" value="mob" />
													<%_ } _%>
													<span class="c-label__text">主要列表示（モバイル向け）</span></label
												>
											</div>
										</div>
									</fieldset>
								</div>
							</div>

							<div class="c-form-controls -submit -center">
								<p><button type="submit" class="c-submit">検索</button></p>
							</div>
						</form>
					</section>

					<%_ if (page.query.output !== null) { _%>
					<section class="p-section -hdg-a js-autofocus">
						<div class="p-section__hdg">
							<h2>検索結果</h2>
						</div>

						<%_ if (searchCount >= 1) { _%>
						<p><%= searchCount %>件ヒットしました。</p>

						<%_ if (searchCount >= 2) { _%>
						<p>
							<label class="c-label"><w0s-input-switch checked="" storage-key="tokyu-history-ditto" polyfill="hidden" class="js-button-ditto" data-ditto-for="result-table"></w0s-input-switch><span class="c-label__text">直上と同じ内容のセルを「〃」で表示する</span></label>
						</p>
						<%_ } _%>

						<table class="p-tokyu-history-table js-result-table" id="result-table">
							<%_ if (page.query.output === 'mob') { _%>
							<thead>
								<tr>
									<th scope="col">車号</th>
									<th scope="col">呼称</th>
									<th scope="col">入籍日</th>
									<th scope="col">旧車号</th>
								</tr>
							</thead>
							<%_ for (const carOfSeries of searchCars) { _%>
							<tbody>
								<%_ for (const car of carOfSeries) { _%> <%_ const changeCount = car.change.length; // 改番回数 _%> <%_ if (changeCount <= 1) { _%>
								<tr data-car-num="<%= car.number %>">
									<td class="u-cell -center"><%= car.sign %><%= car.number %></td>
									<td class="u-cell -center"><%= car.annual %></td>
									<td class="u-cell -center"><%= car.register %></td>
									<%_ if (changeCount === 0) { _%>
									<td></td>
									<%_ } else { _%>
									<td class="u-cell -center"><%= car.change[0].sign %><%= car.change[0].number %></td>
									<%_ } _%>
								</tr>
								<%_ } else { _%>
								<tr data-car-num="<%= car.number %>">
									<td rowspan="<%= changeCount %>" class="u-cell -center"><%= car.sign %><%= car.number %></td>
									<td rowspan="<%= changeCount %>" class="u-cell -center"><%= car.annual %></td>
									<td rowspan="<%= changeCount %>" class="u-cell -center"><%= car.register %></td>
									<td class="u-cell -center"><%= car.change[0].sign %><%= car.change[0].number %></td>
								</tr>
								<%_ for (let i = 1; i < changeCount; i++) { _%>
								<tr data-car-num="<%= car.number %>">
									<td class="u-cell -center"><%= car.change[i].sign %><%= car.change[i].number %></td>
								</tr>
								<%_ } _%> <%_ } _%> <%_ } _%>
							</tbody>
							<%_ } _%> <%_ } else { _%>
							<thead>
								<tr>
									<th scope="col">車号</th>
									<th scope="col">車種</th>
									<th scope="col">形式</th>
									<th scope="col">呼称</th>
									<th scope="col">入籍日</th>
									<th scope="col">旧車号</th>
									<th scope="col">改番日</th>
									<th scope="col">更新</th>
									<th scope="col">新車号、譲渡車号</th>
									<th scope="col">車齢</th>
								</tr>
							</thead>
							<%_ for (const carOfSeries of searchCars) { _%>
							<tbody>
								<%_ for (const car of carOfSeries) { _%> <%_ const changeCount = car.change.length; // 改番回数 _%> <%_ if (changeCount <= 1) { _%>
								<tr data-car-num="<%= car.number %>">
									<td class="u-cell -center"><%= car.sign %><%= car.number %></td>
									<td class="u-cell -center"><%= car.series %></td>
									<td class="u-cell -center"><%= car.type %></td>
									<td class="u-cell -center"><%= car.annual %></td>
									<td class="u-cell -center"><%= car.register %></td>
									<%_ if (changeCount === 0) { _%>
									<td></td>
									<td></td>
									<%_ } else { _%>
									<td class="u-cell -center"><%= car.change[0].sign %><%= car.change[0].number %></td>
									<td class="u-cell -center"><%= car.change[0].date %></td>
									<%_ } _%>
									<td><%= car.renewal %></td>
									<td><%= car.transfer %></td>
									<td class="u-cell -center"><%_ if (car.scrap) { _%>解体<%_ } else { _%><%= car.age %>年<%_ } _%></td>
								</tr>
								<%_ } else { _%>
								<tr data-car-num="<%= car.number %>">
									<td rowspan="<%= changeCount %>" class="u-cell -center"><%= car.sign %><%= car.number %></td>
									<td rowspan="<%= changeCount %>" class="u-cell -center"><%= car.series %></td>
									<td rowspan="<%= changeCount %>" class="u-cell -center"><%= car.type %></td>
									<td rowspan="<%= changeCount %>" class="u-cell -center"><%= car.annual %></td>
									<td rowspan="<%= changeCount %>" class="u-cell -center"><%= car.register %></td>
									<td class="u-cell -center"><%= car.change[0].sign %><%= car.change[0].number %></td>
									<td class="u-cell -center"><%= car.change[0].date %></td>
									<td rowspan="<%= changeCount %>"><%= car.renewal %></td>
									<td rowspan="<%= changeCount %>"><%= car.transfer %></td>
									<td rowspan="<%= changeCount %>" class="u-cell -center"><%_ if (car.scrap) { _%>解体<%_ } else { _%><%= car.age %>年<%_ } _%></td>
								</tr>
								<%_ for (let i = 1; i < changeCount; i++) { _%>
								<tr data-car-num="<%= car.number %>">
									<td class="u-cell -center"><%= car.change[i].sign %><%= car.change[i].number %></td>
									<td class="u-cell -center"><%= car.change[i].date %></td>
								</tr>
								<%_ } _%> <%_ } _%> <%_ } _%>
							</tbody>
							<%_ } _%> <%_ } _%>
						</table>
						<%_ } else { _%>
						<div class="p-box">
							<p><strong>該当する車両が存在しないか、登録されていません。</strong></p>
						</div>
						<%_ } _%>
					</section>
					<%_ } _%>
				</main>
			</div>

			<%- include('./_include/_sidebar') -%><%- include('./_include/_footer') -%>
		</div>
	</body>
</html>
