<!DOCTYPE html>
<html lang="ja">
	<head>
		<title>„Ç¶„Çß„ÉñÂ∑°ÂõûÔºà„É™„ÇΩ„Éº„ÇπÔºâ</title>

		<meta name="viewport" content="width=device-width,initial-scale=1" />

		<link rel="stylesheet" href="/assets/style/admin.css" />
		<link rel="stylesheet" href="/assets/style/layout_full.css" title="ÈÄöÂ∏∏Ë°®Á§∫" />
		<link rel="alternate stylesheet" href="/assets/style/layout_reader.css" title="„É™„Éº„ÉÄ„ÉºË°®Á§∫" />
		<link rel="stylesheet" href="/assets/style/layout_reader.css" media="print" />

		<script src="/assets/script/w0s.mjs" type="module"></script>
	</head>
	<body>
		<div class="l-page">
			<%- include('./_include/_header') -%>

			<div id="content" class="l-content -nosidebar">
				<div class="l-content__header">
					<div class="p-title">
						<h1>„Ç¶„Çß„ÉñÂ∑°ÂõûÔºà„É™„ÇΩ„Éº„ÇπÔºâ</h1>
					</div>
				</div>
				<main class="l-content__main">
					<section class="p-section -hdg-a">
						<div class="p-section__hdg">
							<h2>„Éá„Éº„ÇøÁôªÈå≤</h2>
						</div>

						<form action="<%= page.path %>" method="post" class="c-stack">
							<div class="p-form-grid">
								<div class="p-form-grid__group">
									<fieldset>
										<legend class="p-form-grid__legend">
											<label for="fc-url" class="c-label">URL <strong class="c-label-icon -required">ÂøÖÈ†à</strong></label>
										</legend>
										<div class="p-form-grid__contents">
											<div class="c-form-controls">
												<%_ if (page.query.action_revise_preview || page.query.action_revise) { _%>
												<input type="url" class="c-input -full js-convert-trim" id="fc-url" name="url" value="<%= page.query.url %>" required="" readonly="" />
												<%_ } else { _%>
												<input type="url" class="c-input -full js-convert-trim" id="fc-url" name="url" value="<%= page.query.url %>" required="" />
												<%_ } _%>
											</div>
										</div>
									</fieldset>
								</div>
								<div class="p-form-grid__group">
									<fieldset>
										<legend class="p-form-grid__legend">
											<label for="fc-title" class="c-label">„Çø„Ç§„Éà„É´ <strong class="c-label-icon -required">ÂøÖÈ†à</strong></label>
										</legend>
										<div class="p-form-grid__contents">
											<div class="c-form-controls">
												<input class="c-input -full js-convert-trim" id="fc-title" name="title" value="<%= page.query.title %>" required="" />
											</div>
										</div>
									</fieldset>
								</div>
								<div class="p-form-grid__group">
									<fieldset>
										<legend class="p-form-grid__legend">
											<label for="fc-category" class="c-label">„Ç´„ÉÜ„Ç¥„É™„Éº <strong class="c-label-icon -required">ÂøÖÈ†à</strong></label>
										</legend>
										<div class="p-form-grid__contents">
											<div class="c-form-controls">
												<select class="c-select" id="fc-category" name="category">
													<%_ for (const category of categoryMaster) { _%> <%_ if (page.query.category === category.fk) { _%>
													<option value="<%= category.fk %>" selected=""><%= category.name %></option>
													<%_ } else { _%>
													<option value="<%= category.fk %>"><%= category.name %></option>
													<%_ } _%> <%_ } _%>
												</select>
											</div>
										</div>
									</fieldset>
								</div>
								<div class="p-form-grid__group">
									<fieldset>
										<legend class="p-form-grid__legend">
											<label for="fc-priority" class="c-label">ÂÑ™ÂÖàÂ∫¶ <strong class="c-label-icon -required">ÂøÖÈ†à</strong></label>
										</legend>
										<div class="p-form-grid__contents">
											<div class="c-form-controls">
												<select class="c-select" id="fc-priority" name="priority">
													<%_ for (const priority of priorityMaster) { _%> <%_ if (page.query.priority === priority.fk) { _%>
													<option value="<%= priority.fk %>" selected=""><%= priority.name %></option>
													<%_ } else { _%>
													<option value="<%= priority.fk %>"><%= priority.name %></option>
													<%_ } _%> <%_ } _%>
												</select>
											</div>
										</div>
									</fieldset>
								</div>
								<div class="p-form-grid__group">
									<fieldset>
										<legend class="p-form-grid__legend">„Éñ„É©„Ç¶„Ç∂</legend>
										<div class="p-form-grid__contents">
											<div class="c-form-controls">
												<label class="c-label -check">
													<%_ if (page.query.browser) { _%>
													<input type="checkbox" name="browser" value="1" checked="" />
													<%_ } else { _%>
													<input type="checkbox" name="browser" value="1" />
													<%_ } _%>
													<span class="c-label__text">„Ç¶„Çß„Éñ„Éñ„É©„Ç¶„Ç∂„Åß„Ç¢„ÇØ„Çª„Çπ„Åô„Çã„Åã</span></label
												>
											</div>
										</div>
									</fieldset>
								</div>
								<div class="p-form-grid__group">
									<fieldset>
										<legend class="p-form-grid__legend">
											<label for="fc-selector" class="c-label">„Çª„É¨„ÇØ„Çø„Éº <strong class="c-label-icon -optional">‰ªªÊÑè</strong></label>
										</legend>
										<div class="p-form-grid__contents">
											<div class="c-form-controls">
												<input class="c-input -full js-convert-trim" id="fc-selector" name="selector" value="<%= page.query.selector %>" />
											</div>
										</div>
									</fieldset>
								</div>
							</div>

							<div class="c-form-controls -submit">
								<%_ if (page.query.action_revise_preview || page.query.action_revise) { _%>
								<p><button class="c-submit" name="actionrev" value="1">‰øÆÊ≠£</button></p>
								<%_ } else { _%>
								<p><button class="c-submit" name="actionadd" value="1">ÁôªÈå≤</button></p>
								<%_ } _%>
							</div>
						</form>
					</section>

					<%_ for (const [categoryName, resourcePageOfCategory] of resourcePageList) { _%>
					<section class="p-section -hdg-a">
						<div class="p-section__hdg">
							<h2><%= categoryName %></h2>
						</div>

						<table class="p-table">
							<thead>
								<tr>
									<td></td>
									<th scope="col">ÂØæË±°„Éö„Éº„Ç∏</th>
									<th scope="col">ÂÑ™ÂÖà</th>
									<th scope="col">üåê</th>
									<th scope="col">„Çª„É¨„ÇØ„Çø„Éº</th>
									<th scope="col">„Çµ„Ç§„Ç∫</th>
									<th scope="col">Êõ¥Êñ∞Êó•ÊôÇ</th>
								</tr>
							</thead>
							<tbody>
								<%_ for (const resourcePage of resourcePageOfCategory) { _%>
								<tr>
									<td>
										<form action="<%= page.path %>" method="post" class="c-stack">
											<p>
												<input type="hidden" name="url" value="<%= resourcePage.url %>" />
												<button name="actionrevpre" value="1" formmethod="get" class="c-submit -compact">‰øÆÊ≠£</button>
												<button name="actiondel" value="1" is="w0s-confirm-button" data-message="ÂâäÈô§„Åó„Åæ„Åô„Åã?" class="c-submit -compact">ÂâäÈô§</button>
											</p>
											<p><a href="/admin/crawler-resource-log?dir=<%= resourcePage.url.hostname %><%= resourcePage.url.pathname.replace(/\/[^/]*$/g, '') %>">Â∑ÆÂàÜ„ÉÅ„Çß„ÉÉ„ÇØ</a></p>
										</form>
									</td>
									<td>
										<a href="<%= resourcePage.url %>" referrerpolicy="no-referrer"><%= resourcePage.title %></a>
										<p style="margin-block-start: 0.5em; font-size: 80%"><%= resourcePage.url %></p>
									</td>
									<td><%= resourcePage.priority %></td>
									<td><%_ if (resourcePage.browser) { _%>‚úî<%_ } _%></td>
									<td><%= resourcePage.selector %></td>
									<td><%= resourcePage.content_length %></td>
									<%_ if (resourcePage.last_modified !== null) { _%>
									<td><%= resourcePage.last_modified.format('YYYYÂπ¥MÊúàDÊó• HÊôÇmÂàÜ') %></td>
									<%_ } else { _%>
									<td></td>
									<%_ } _%>
								</tr>
								<%_ } _%>
							</tbody>
						</table>
					</section>
					<%_ } _%>
				</main>
			</div>

			<%- include('./_include/_footer') -%>
		</div>
	</body>
</html>
