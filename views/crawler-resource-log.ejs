<!DOCTYPE html>
<html lang="ja">
	<head>
		<title>ウェブ巡回（リソース）</title>

		<meta name="viewport" content="width=device-width,initial-scale=1" />

		<link rel="stylesheet" href="/assets/style/admin.css" />
		<link rel="stylesheet" href="/assets/style/layout_full.css" title="通常表示" />
		<link rel="alternate stylesheet" href="/assets/style/layout_reader.css" title="リーダー表示" id="stylesheet-print" />

		<script src="/assets/script/w0s.mjs" type="module"></script>
	</head>
	<body>
		<div class="l-page">
			<%- include('./_include/_header') %>

			<div id="content" class="l-content -nosidebar">
				<div class="l-content__header">
					<div class="p-title">
						<h1>ウェブ巡回（リソース）</h1>
					</div>
				</div>
				<main class="l-content__main">
					<% if (diff.length >= 1) { %>
					<table class="p-admin-crawler-diff">
						<tbody>
							<% for (const part of diff) { %>
							<tr class="p-admin-crawler-diff__line<% if (part.added) { %> -added<% } else if (part.removed) { %> -removed<% } %>">
								<% if (part.added) { %>
								<td class="p-admin-crawler-diff__type">+</td>
								<% } else if (part.removed) { %>
								<td class="p-admin-crawler-diff__type">-</td>
								<% } else { %>
								<td class="p-admin-crawler-diff__type"></td>
								<% } %> <% if (part.added) { %>
								<td>
									<pre><code><%= part.value %></code></pre>
								</td>
								<% } else if (part.removed) { %>
								<td>
									<pre><code><%= part.value %></code></pre>
								</td>
								<% } else { %>
								<td>
									<pre><code><%= part.value %></code></pre>
								</td>
								<% } %>
							</tr>
							<% } %>
						</tbody>
					</table>
					<% } %> <% if (fileList.length >= 1) { %>
					<form class="c-stack">
						<p><input type="hidden" name="dir" value="<%= page.query.dir %>" /></p>
						<p><button>比較</button></p>
						<ul>
							<% for (const file of fileList) { %>
							<li>
								<label>
									<% if (page.query.diff.includes(file)) { %>
									<input type="checkbox" name="diff[]" value="<%= file %>" checked="" />
									<% } else { %>
									<input type="checkbox" name="diff[]" value="<%= file %>" />
									<% } %><%= file %></label
								>
								(<a href="/admin/crawler-resource-log/<%= page.query.dir %>/<%= file %>">ソースコード</a>)
							</li>
							<% } %>
						</ul>
					</form>
					<% } else { %>
					<p><strong>データがありません。</strong></p>
					<% } %>
				</main>
			</div>

			<%- include('./_include/_footer') %>
		</div>
	</body>
</html>
