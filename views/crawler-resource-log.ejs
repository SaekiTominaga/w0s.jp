<!DOCTYPE html>
<html lang="ja">
	<head>
		<title>ウェブ巡回（リソース）</title>

		<meta name="viewport" content="width=device-width,initial-scale=1" />

		<link rel="stylesheet" href="/assets/style/admin.css" />
		<link rel="stylesheet" href="/assets/style/layout_full.css" title="通常表示" />
		<link rel="alternate stylesheet" href="/assets/style/layout_reader.css" title="リーダー表示" id="stylesheet-print" />

		<script src="/assets/script/w0s.mjs" type="module"></script>
	</head>
	<body>
		<div class="l-page">
			<%- include('./_include/_header') -%>

			<div id="content" class="l-content -nosidebar">
				<div class="l-content__header">
					<div class="p-title">
						<h1>ウェブ巡回（リソース）</h1>
					</div>
				</div>
				<main class="l-content__main">
					<%_ if (diff.length >= 1) { _%>
					<table class="p-admin-crawler-diff">
						<tbody>
							<%_ for (const part of diff) { _%>
							<tr class="p-admin-crawler-diff__line<%_ if (part.added) { _%> -added<%_ } else if (part.removed) { _%> -removed<%_ } _%>">
								<%_ if (part.added) { _%>
								<td class="p-admin-crawler-diff__type">+</td>
								<%_ } else if (part.removed) { _%>
								<td class="p-admin-crawler-diff__type">-</td>
								<%_ } else { _%>
								<td class="p-admin-crawler-diff__type"></td>
								<%_ } _%> <%_ if (part.added) { _%>
								<td>
									<pre><code><%= part.value %></code></pre>
								</td>
								<%_ } else if (part.removed) { _%>
								<td>
									<pre><code><%= part.value %></code></pre>
								</td>
								<%_ } else { _%>
								<td>
									<pre><code><%= part.value %></code></pre>
								</td>
								<%_ } _%>
							</tr>
							<%_ } _%>
						</tbody>
					</table>
					<%_ } _%> <%_ if (fileList.length >= 1) { _%>
					<form class="c-stack">
						<p><input type="hidden" name="dir" value="<%= page.query.dir %>" /></p>
						<p><button class="c-submit">比較</button></p>
						<ul>
							<%_ for (const file of fileList) { _%>
							<li>
								<label>
									<%_ if (page.query.diff.includes(file)) { _%>
									<input type="checkbox" name="diff[]" value="<%= file %>" checked="" />
									<%_ } else { _%>
									<input type="checkbox" name="diff[]" value="<%= file %>" />
									<%_ } _%><%= file _%></label
								>
								(<a href="/admin/crawler-resource-log/<%= page.query.dir %>/<%= file %>">ソースコード</a>)
							</li>
							<%_ } _%>
						</ul>
					</form>
					<%_ } else { _%>
					<p><strong>データがありません。</strong></p>
					<%_ } _%>
				</main>
			</div>

			<%- include('./_include/_footer') -%>
		</div>
	</body>
</html>
